{% extends "base.html" %} {% block title %}MyRecipes{% endblock %}
<!-- Overwrites title-->

{% block content %}
<head>
    
    <style>
        .img-fit img{
        width:100%;
        height: 100%;
        object-fit:cover; 
        }
        .loginbox{
        width:1022px;
        }
        .loginbox .jumbotron{
        margin-left: 0px;
        padding-top: 20px;
        padding-bottom: 15px;
        }
        .row h4{
        margin-right: 400px;
        }
    </style>
  
</head>
<!-- Header -->
<div class="container">
  <div class="jumbotron page-header" style="margin-bottom: 0px">
    <h1 class="display-4">MyRecipes</h1>
    <p class="my-4">Sharing Recipes</p>
  </div>
</div>
<body>
    <main class="page projects-page" style = "margin-left:28px;">
      <section class="portfolio-block projects-cards">
        <div class="container">
          <!--encourring  for signup-->
          <br>
          <div class = "loginbox">  
            <div class="jumbotron" style="margin-bottom: 0px">
                {% if current_user.is_authenticated %}   
                <h2>Hello {{userName}}</h2>
                {% else %}
                <div class = "row"><h4>Want to join our MyRecipe family right now?</h4>
                  <a class="nav-item nav-link" id="signUp" href="/sign-up">Sign Up</a>
                </div>
                {% endif %}
            </div>
          </div>
        
        
              
          <div class="row">
            <!--card for create-->
            <div class="col-md-6 col-lg-4">
                <div class="card" onclick="create_book()" style="width: 18rem; height : 20rem; background-color:#ececea; ">
                    <div class="card-body" align = "center" style="margin-top: 70px;">
                        <img border="0" src="{{ url_for('static',filename = 'images/add1.png')}}" alt="add" height = 100px width = 100px >
                        <h5 class="card-title">Create a new cookbook</h5>
                        <script>
                        function create_book() {
                            var txt;
                            var name = prompt("CookBook Name：", "NewBook");
                            if (name == null || name == "") {
                                txt = "cancel";
                            } else {
                                txt = "Hello，" + name + "！How r u？";
                                fetch("/cookbook_create", {
                                    method: "POST",
                                    body: JSON.stringify({
                                    name: name,
                                    }),
                                }).then((_res) => {
                                    window.location.reload(true);
                                });
                            }
                        }
                        </script>
                    </div>
                </div>
            </div>
            {% for book in books %}
            <div class="col-md-6 col-lg-4">
              <div class="card border-0" style = "background-color:#ececea;">
                  <div class="zoom img-fit">
                    <a href="/profile/cookbook.{{book.name}}.{{book.id}}"><img border="0"  src="{{ url_for('static',filename = 'images/bookmark2.png')}}" ></a></div>
                    <div class="card-body">
                      <h6><a href="/recipe.{{book.name}}.{{book.id}}">{{book.name}}</a></h6>
                        <button class="btn btn-warning" type="submit" name="delete" id = "delete" onclick = "deleteBook({{book.id}})">Delete</button>
                        <script>
                            function deleteBook(book_id) {
                            if (confirm("Are you sure you want to delete this cookbook?"))
                                fetch("/delete_book", {
                                method: "POST",
                                body: JSON.stringify({book_id: book_id,}),
                                }).then((_res) => {
                                window.location.reload(true);
                                });
                                }
                        </script>
                        <button class="btn btn-warning" type="submit" name="edit" id = "edit" onclick = "editName({{book.id}})">Edit</button>
                        <script>
                        function editName(book_id) {
                        var new_Name = prompt("Enter new Name to change.");
                        if (new_Name != null) {
                            fetch("/edit_bookname", {
                            method: "POST",
                            body: JSON.stringify({ book_id: book_id, name: new_Name }),
                            }).then((_res) => {
                            window.location.reload(true);
                            });
                        }
                        }
                        </script>
                    </div>
                  </div>
              </div>
              {% endfor %}
                    
            </div>
            <!--cards for create-->
          <br>
          <div class="card" style="width: 18rem;">
            <img border="0"  src="{{ url_for('static',filename = 'images/add1.png')}}" alt="add" height = 100px width = 100px >
            <div class="card-body">
              <h5 class="card-title">Card title</h5>
              <h6>Some quick example text to build on the card title and make up the bulk of the card's content.</h6>
            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">Cras justo odio</li>
              <li class="list-group-item">Dapibus ac facilisis in</li>
              <li class="list-group-item">Vestibulum at eros</li>
            </ul>
            <div class="card-body">
              <a href="#" class="card-link">Card link</a>
              <a href="#" class="card-link">Another link</a>
            </div>
          </div>
          </div>
        </div>  
      </section>
    </main>
  </body
{% endblock %}
